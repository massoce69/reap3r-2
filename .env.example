# MASSVISION Reap3r
# Environment Variables

# ── Database ──
DATABASE_URL=postgresql://reap3r:CHANGE_ME_db_password@localhost:5432/reap3r
DB_POOL_MIN=2
DB_POOL_MAX=20

# ── Backend ──
NODE_ENV=production
PORT=4000
# Deprecated legacy var (kept for migration only)
WS_PORT=4001
# Deprecated legacy var (kept for migration only)
UI_WS_PORT=4002
API_BASE_URL=https://reap3r.example.com
JWT_SECRET=CHANGE_ME_generate_a_64_char_random_string
JWT_EXPIRES_IN=24h
HMAC_SECRET=CHANGE_ME_generate_a_64_char_random_string_for_agent_hmac
DEPLOY_CALLBACK_KEY=CHANGE_ME_long_random_callback_key
BCRYPT_ROUNDS=12

# ── Frontend ──
NEXT_PUBLIC_API_URL=https://reap3r.example.com/api
NEXT_PUBLIC_WS_URL=wss://reap3r.example.com/ws

# ── Redis (optional, for BullMQ workers) ──
REDIS_URL=redis://localhost:6379

# ── TLS ──
TLS_CERT_PATH=/etc/letsencrypt/live/reap3r.example.com/fullchain.pem
TLS_KEY_PATH=/etc/letsencrypt/live/reap3r.example.com/privkey.pem
DOMAIN=reap3r.example.com

# ── Observability ──
LOG_LEVEL=info
PROMETHEUS_ENABLED=true

# ── Agent Distribution ──
AGENT_DOWNLOAD_BASE_URL=https://reap3r.example.com/downloads
AGENT_UPDATE_REQUIRE_SIGNATURE=true
REAP3R_UPDATE_PRIVKEY_HEX=
AGENT_UPDATE_REQUIRE_AUTHENTICODE=false
AGENT_UPDATE_SIGNER_THUMBPRINT=
AGENT_UPDATE_RETRY_COUNT=2
AGENT_UPDATE_RETRY_BACKOFF_MS=1500
AGENT_UPDATE_DEFER_SECONDS=0
AGENT_UPDATE_JITTER_MAX_SECONDS=60
AGENT_UPDATE_SELF_RESTART_DELAY_SECONDS=6
# Optional explicit service/launchd target for restart after update:
# AGENT_UPDATE_SERVICE_NAME=reap3r-agent
# AGENT_UPDATE_LAUNCHD_LABEL=com.massvision.reap3r-agent
# Optional per-platform manifest override:
# AGENT_SIGNED_MANIFEST_PATH_WINDOWS_X86_64=/opt/reap3r/agent/reap3r-agent.exe.manifest.json
# AGENT_SIGNED_MANIFEST_PATH_WINDOWS_X86=/opt/reap3r/agent/reap3r-agent-x86.exe.manifest.json
